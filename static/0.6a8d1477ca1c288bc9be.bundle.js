webpackJsonp([0],{1814:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_objectWithoutProperties__=__webpack_require__(42),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_objectWithoutProperties___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_objectWithoutProperties__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__=__webpack_require__(6),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__=__webpack_require__(9),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__),__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__=__webpack_require__(7),__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__),__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__),__WEBPACK_IMPORTED_MODULE_7_react__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_7_react___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_react__),__WEBPACK_IMPORTED_MODULE_8_prop_types__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_8_prop_types___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_prop_types__),__WEBPACK_IMPORTED_MODULE_9_redux__=__webpack_require__(281),__WEBPACK_IMPORTED_MODULE_10_react_intl__=__webpack_require__(92),__WEBPACK_IMPORTED_MODULE_11__deskpro_portal_components__=__webpack_require__(670),__WEBPACK_IMPORTED_MODULE_12_lodash_omitBy__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11__deskpro_portal_components__),__webpack_require__(1815)),__WEBPACK_IMPORTED_MODULE_12_lodash_omitBy___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_12_lodash_omitBy__),__WEBPACK_IMPORTED_MODULE_13_lodash_isEmpty__=__webpack_require__(1818),__WEBPACK_IMPORTED_MODULE_13_lodash_isEmpty___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13_lodash_isEmpty__),__WEBPACK_IMPORTED_MODULE_14__form_Button__=__webpack_require__(185),__WEBPACK_IMPORTED_MODULE_15__utils_translateFieldLayout__=__webpack_require__(944),ChatEnterForm=function(_PureComponent){function ChatEnterForm(){return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this,ChatEnterForm),__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(this,(ChatEnterForm.__proto__||__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(ChatEnterForm)).apply(this,arguments))}return __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default()(ChatEnterForm,_PureComponent),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(ChatEnterForm,[{key:"render",value:function render(){return __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11__deskpro_portal_components__.Form,null,__WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11__deskpro_portal_components__.FieldLayout,this.props),__WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_14__form_Button__.a,{width:"full",size:"medium",color:"primary",type:"submit"},__WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10_react_intl__.a,{id:"chat.enter_form.button",defaultMessage:"Start Conversation"})))}}]),ChatEnterForm}(__WEBPACK_IMPORTED_MODULE_7_react__.PureComponent);ChatEnterForm.propTypes={intl:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.object.isRequired};var formEnhancer=Object(__WEBPACK_IMPORTED_MODULE_11__deskpro_portal_components__.withFormik)({enableReinitialize:!0,mapPropsToValues:function mapPropsToValues(_ref){var category=_ref.category,layouts=_ref.layouts,user=_ref.user,layout=layouts.getMatchingLayout({category:category}),userData=__WEBPACK_IMPORTED_MODULE_12_lodash_omitBy___default()(user,__WEBPACK_IMPORTED_MODULE_13_lodash_isEmpty___default.a);return layout?__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default()({category:category},layout.getDefaultValues(),userData):__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default()({category:category},userData)},handleSubmit:function handleSubmit(values,_ref2){var props=_ref2.props;_ref2.setSubmitting;props.onSubmit(values)}});__webpack_exports__.a=Object(__WEBPACK_IMPORTED_MODULE_9_redux__.d)(__WEBPACK_IMPORTED_MODULE_10_react_intl__.d,function mapProps(WrappedComponent){return function(_ref3){var formConfig=_ref3.formConfig,props=__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_objectWithoutProperties___default()(_ref3,["formConfig"]);return __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(WrappedComponent,__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default()({},props,{layouts:new __WEBPACK_IMPORTED_MODULE_11__deskpro_portal_components__.LayoutConfig(Object(__WEBPACK_IMPORTED_MODULE_15__utils_translateFieldLayout__.a)(formConfig,props.intl.formatMessage))}))}},formEnhancer)(ChatEnterForm),ChatEnterForm.__docgenInfo={description:"",displayName:"ChatEnterForm",props:{intl:{type:{name:"object"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/chat/ChatEnterForm.jsx"]={name:"ChatEnterForm",docgenInfo:ChatEnterForm.__docgenInfo,path:"src/components/chat/ChatEnterForm.jsx"})},1815:function(module,exports,__webpack_require__){var baseIteratee=__webpack_require__(186),negate=__webpack_require__(1816),pickBy=__webpack_require__(1817);module.exports=function omitBy(object,predicate){return pickBy(object,negate(baseIteratee(predicate)))}},1816:function(module,exports){var FUNC_ERROR_TEXT="Expected a function";module.exports=function negate(predicate){if("function"!=typeof predicate)throw new TypeError(FUNC_ERROR_TEXT);return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}},1817:function(module,exports,__webpack_require__){var arrayMap=__webpack_require__(188),baseIteratee=__webpack_require__(186),basePickBy=__webpack_require__(945),getAllKeysIn=__webpack_require__(672);module.exports=function pickBy(object,predicate){if(null==object)return{};var props=arrayMap(getAllKeysIn(object),function(prop){return[prop]});return predicate=baseIteratee(predicate),basePickBy(object,props,function(value,path){return predicate(value,path[0])})}},1818:function(module,exports,__webpack_require__){var baseKeys=__webpack_require__(323),getTag=__webpack_require__(191),isArguments=__webpack_require__(123),isArray=__webpack_require__(21),isArrayLike=__webpack_require__(73),isBuffer=__webpack_require__(137),isPrototype=__webpack_require__(138),isTypedArray=__webpack_require__(189),mapTag="[object Map]",setTag="[object Set]",hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function isEmpty(value){if(null==value)return!0;if(isArrayLike(value)&&(isArray(value)||"string"==typeof value||"function"==typeof value.splice||isBuffer(value)||isTypedArray(value)||isArguments(value)))return!value.length;var tag=getTag(value);if(tag==mapTag||tag==setTag)return!value.size;if(isPrototype(value))return!baseKeys(value).length;for(var key in value)if(hasOwnProperty.call(value,key))return!1;return!0}},1819:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__=__webpack_require__(9),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__=__webpack_require__(7),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__),__WEBPACK_IMPORTED_MODULE_5_react__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_5_react___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_react__),__WEBPACK_IMPORTED_MODULE_6_prop_types__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_6_prop_types___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_prop_types__),__WEBPACK_IMPORTED_MODULE_7__MessageBubble__=__webpack_require__(941),__WEBPACK_IMPORTED_MODULE_8__MessageForm__=__webpack_require__(942),PromptMessage=function(_PureComponent){function PromptMessage(){return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this,PromptMessage),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this,(PromptMessage.__proto__||__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(PromptMessage)).apply(this,arguments))}return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(PromptMessage,_PureComponent),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(PromptMessage,[{key:"render",value:function render(){var _props=this.props,prompt=_props.prompt,onSendMessage=_props.onSendMessage;return __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_react__.Fragment,null,__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_7__MessageBubble__.a,{origin:"system",message:prompt}),__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8__MessageForm__.a,{onSend:onSendMessage}))}}]),PromptMessage}(__WEBPACK_IMPORTED_MODULE_5_react__.PureComponent);PromptMessage.propTypes={prompt:__WEBPACK_IMPORTED_MODULE_6_prop_types___default.a.string.isRequired,onSendMessage:__WEBPACK_IMPORTED_MODULE_6_prop_types___default.a.func.isRequired},__webpack_exports__.a=PromptMessage,PromptMessage.__docgenInfo={description:"",displayName:"PromptMessage",props:{prompt:{type:{name:"string"},required:!0,description:""},onSendMessage:{type:{name:"func"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/chat/PromptMessage.jsx"]={name:"PromptMessage",docgenInfo:PromptMessage.__docgenInfo,path:"src/components/chat/PromptMessage.jsx"})},672:function(module,exports,__webpack_require__){var baseGetAllKeys=__webpack_require__(284),getSymbolsIn=__webpack_require__(673),keysIn=__webpack_require__(193);module.exports=function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}},673:function(module,exports,__webpack_require__){var arrayPush=__webpack_require__(190),getPrototype=__webpack_require__(192),getSymbols=__webpack_require__(205),stubArray=__webpack_require__(285),getSymbolsIn=Object.getOwnPropertySymbols?function(object){for(var result=[];object;)arrayPush(result,getSymbols(object)),object=getPrototype(object);return result}:stubArray;module.exports=getSymbolsIn},947:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__=__webpack_require__(6),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__=__webpack_require__(9),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__=__webpack_require__(7),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__),__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__),__WEBPACK_IMPORTED_MODULE_6_react__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_6_react___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_react__),__WEBPACK_IMPORTED_MODULE_7_prop_types__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_7_prop_types___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_prop_types__),__WEBPACK_IMPORTED_MODULE_8_react_redux__=__webpack_require__(322),__WEBPACK_IMPORTED_MODULE_9_redux__=__webpack_require__(281),__WEBPACK_IMPORTED_MODULE_10_react_intl__=__webpack_require__(92),__WEBPACK_IMPORTED_MODULE_11__components_chat_ChatEnterForm__=__webpack_require__(1814),__WEBPACK_IMPORTED_MODULE_12__components_core_Block__=__webpack_require__(937),__WEBPACK_IMPORTED_MODULE_13__modules_chat__=__webpack_require__(282),__WEBPACK_IMPORTED_MODULE_14__modules_guest__=__webpack_require__(671),__WEBPACK_IMPORTED_MODULE_15__components_chat_PromptMessage__=__webpack_require__(1819),StartChatScreen=function(_PureComponent){function StartChatScreen(){var _ref,_temp,_this,_ret;__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this,StartChatScreen);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default()(this,(_ref=StartChatScreen.__proto__||__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(StartChatScreen)).call.apply(_ref,[this].concat(args))),_this.state={viewMode:_this.props.preChatForm.length?"form":"prompt"},_this.promptMessage=_this.props.prompt?_this.props.intl.formatMessage({id:_this.props.prompt,defaultMessage:_this.props.prompt}):null,_this.createChat=function(values){var meta=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_this$props=_this.props,createChat=_this$props.createChat,screenName=_this$props.screenName,history=_this$props.history;createChat(values,__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({prompt:_this.promptMessage,fromScreen:screenName,history:history},meta))},_this.onSendMessage=function(message){if(message){var category=_this.props.category,messageModel="string"==typeof message?{message:message,origin:"user",type:"chat.message"}:message;_this.createChat({category:category},{message:messageModel})}},_ret=_temp,__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default()(_this,_ret)}return __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(StartChatScreen,_PureComponent),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default()(StartChatScreen,[{key:"render",value:function render(){var _props=this.props,category=_props.category,preChatForm=_props.preChatForm,prompt=_props.prompt,intl=_props.intl,user=_props.user,viewMode=this.state.viewMode,capCategory=category[0].toUpperCase()+category.substring(1);return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_12__components_core_Block__.a,{title:intl.formatMessage({id:"chat.header."+category+"_title",defaultMessage:"{category} conversation"},{category:capCategory})},"form"===viewMode&&__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11__components_chat_ChatEnterForm__.a,{user:user,category:category,onSubmit:this.createChat,formConfig:preChatForm}),"prompt"===viewMode&&prompt&&__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_15__components_chat_PromptMessage__.a,{prompt:this.promptMessage,onSendMessage:this.onSendMessage}))}}]),StartChatScreen}(__WEBPACK_IMPORTED_MODULE_6_react__.PureComponent);StartChatScreen.propTypes={user:__WEBPACK_IMPORTED_MODULE_7_prop_types___default.a.object,preChatForm:__WEBPACK_IMPORTED_MODULE_7_prop_types___default.a.array,prompt:__WEBPACK_IMPORTED_MODULE_7_prop_types___default.a.string},StartChatScreen.defaultProps={user:{},preChatForm:[],prompt:""};__webpack_exports__.default=Object(__WEBPACK_IMPORTED_MODULE_9_redux__.d)(Object(__WEBPACK_IMPORTED_MODULE_8_react_redux__.b)(function mapStateToProps(state,props){return{user:Object(__WEBPACK_IMPORTED_MODULE_14__modules_guest__.b)(state)}},{createChat:__WEBPACK_IMPORTED_MODULE_13__modules_chat__.b,sendMessage:__WEBPACK_IMPORTED_MODULE_13__modules_chat__.i}),__WEBPACK_IMPORTED_MODULE_10_react_intl__.d)(StartChatScreen),StartChatScreen.__docgenInfo={description:"",displayName:"StartChatScreen",props:{user:{type:{name:"object"},required:!1,description:"",defaultValue:{value:"{}",computed:!1}},preChatForm:{type:{name:"array"},required:!1,description:"",defaultValue:{value:"[]",computed:!1}},prompt:{type:{name:"string"},required:!1,description:"",defaultValue:{value:"''",computed:!1}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/StartChatScreen.jsx"]={name:"StartChatScreen",docgenInfo:StartChatScreen.__docgenInfo,path:"src/screens/StartChatScreen.jsx"})}});